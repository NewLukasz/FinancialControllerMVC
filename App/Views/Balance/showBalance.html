{% extends 'base.html' %}

{% block title %}Balance{% endblock %}

{% block footer %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
        google.charts.load('current', {'packages':['table']});
        google.charts.setOnLoadCallback(drawDetailedIncomeTable);

        function drawDetailedIncomeTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Amount');
		data.addColumn('string', 'Source');
		data.addColumn('string', 'Date');
        data.addColumn('string', 'Comment');
        '{%for incomeData, income in detailedIncomeTable %}'
        data.addRows([
            ['{{income.amount}}','{{income.source}}', '{{income.date}}', '{{income.comment}}']
        ]);
        '{%endfor%}'
        var table = new google.visualization.Table(document.getElementById('detailedIncomeTable'));
		table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
        }
</script>

    

{%endblock%}

{% block body %}

        <div class="container">
            <div class="row p-4">
                <div class="col-lg-12">
                    
                    <div class="d-flex justify-content-center">
                    <h1>Balance from {{firstLimit}} to {{secondLimit}}</h1>
                    </div>
                    
                </div>
                <div class="col-lg-12">
                    
                    <div class="d-flex justify-content-center">
                  
                    </div>
                    
                </div>
                <div class="col-lg-12">
                    
                    <div class="d-flex justify-content-center mt-3">
                    <h2>Balance of incomes and expenses in case of category below:</h2>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        <!--Income balance - tylko przychody-->
        <div class="container" style="border: 1px solid black;">
            <h3 class="d-flex justify-content-center mt-3">Incomes balance</h3>
            <div class="row p-2">
                <div class="col-lg-6 d-flex justify-content-center mt-3">
                    <div id="incomesCategoryTable"></div>
                </div>
                <div class="col-lg-6 d-flex justify-content-center">
                    <div id="IncomesPiechart" style="width: 500px; height: 300px;"></div>
                </div>
            </div>
        </div>

        <!--Expense balance - tylko wydatki -->
        <div class="container mt-3" style="border: 1px solid black;">
            <h3 class="d-flex justify-content-center mt-3">Expenses balance</h3>
            <div class="row p-2">
                <div class="col-lg-6 d-flex justify-content-center">
                    <div id="expensesCategoryTable"></div>
                </div>
                <div class="col-lg-6 d-flex justify-content-center">
                    <div id="ExpensePiechart" style="width: 500px; height: 300px;"></div>
                </div>
            </div>
        </div>



        <!--Szczegolowe dane - trzecia tabela -->
        <div class="container mt-5" style="border: 1px solid black;">
            <h3 class="d-flex justify-content-center mt-3">Below detailed balances</h3>
            <div class="row p-4">
                <div class="col-lg-6 mt-2">
                    <div id="detailedIncomeTable">Income table</div>
                    
                </div>
                <div class="col-lg-6 mt-2 ">
                    <div id="detailedExpenseTable">Expense table</div>
                </div>
            </div>
        </div>


{% endblock %}
